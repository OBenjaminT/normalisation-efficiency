CREATE TABLE IF NOT EXISTS yeargroup (Name Text, Code Text PRIMARY KEY, NationalCurriculumYear Text, HeadOfYear Text, AssistantHeadOfYear Text, FOREIGN KEY (HeadOfYear) REFERENCES user (Username), FOREIGN KEY (AssistantHeadOfYear) REFERENCES user (Username));
CREATE TABLE IF NOT EXISTS user (YearGroup Text, title Text, position Text, Roles Text, House Text, tutor Text, Firstname Text, Middlename Text, Surname Text, Preferredname Text, Status Text, Year Integer, Email Text, SchoolID Text, IsamsID Text, IsamsCode Text, LastActive Text, PupilType Text, AcademicStudy Text, ExpoID Text, Archived Integer, Username Text PRIMARY KEY, FOREIGN KEY (YearGroup) REFERENCES yeargroup (Code));
CREATE TABLE IF NOT EXISTS period (StartTime Integer, Day Integer, Week Text, roomCode Integer, EndTime Integer, ShortName Text, LongName Text, Building Text, roomName Text, roomInitials Text, subjectDepartment Text, subjectName Text, subjectCode Text, subjectReportName Text, lessonYearGroup Text, Teacher Text, Archived Integer, Year Text, lessonName Text, PRIMARY KEY (StartTime, Day, Week, roomCode), FOREIGN KEY (lessonYearGroup) REFERENCES yeargroup (Code), FOREIGN KEY (Teacher) REFERENCES user (Username));
CREATE TABLE IF NOT EXISTS setStudents (student Text NOT NULL, StartTime Integer NOT NULL, Day Integer NOT NULL, Week Text NOT NULL, roomCode Integer NOT NULL, FOREIGN KEY (StartTime) REFERENCES period (StartTime), FOREIGN KEY (Day) REFERENCES period (Day), FOREIGN KEY (Week) REFERENCES period (Week), FOREIGN KEY (roomCode) REFERENCES period (roomCode), FOREIGN KEY (student) REFERENCES user (Username));